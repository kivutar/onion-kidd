
function load_map(m)
	MAP = m

	for y = 1, #MAP, 1 do
		for x = 1, #MAP[y] do
			if MAP[y][x] == 1 then
				table.insert(SOLIDS, newGround({uid=newUID(),x=(x-1)*16,y=(y-1)*16}))
			elseif MAP[y][x] == 2 then
				table.insert(SOLIDS, newDirt({uid=newUID(),x=(x-1)*16,y=(y-1)*16}))
			elseif MAP[y][x] == 3 then
				table.insert(SOLIDS, newStar({uid=newUID(),x=(x-1)*16,y=(y-1)*16}))
			elseif MAP[y][x] == 4 then
				table.insert(ENTITIES, newBird({uid=newUID(),x=(x-1)*16,y=(y-1)*16}))
			end
		end
	end
end

function map_get(y, x)
	if x < 0 or x > 20 then return nil end
	if y < 0 or y > #MAP then return nil end
	return MAP[y][x]
end

MAP_plain = {
	{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0},
	{1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1},
	{1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1},
	{1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1},
	{1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1},
	{1,1,1,3,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1},
	{1,1,1,3,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1},
	{1,1,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1},
	{1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,2,3,1,1},
	{1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,0,0,0,0,0,2,0,0,1,1,1,1,1,1,1,1},
	{1,1,1,1,0,0,0,0,0,2,0,0,0,1,1,1,1,1,1,1},
	{1,1,1,1,0,0,1,1,1,1,0,0,0,0,1,1,1,1,1,1},
	{1,1,1,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,1},
	{1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1},
	{1,1,0,0,0,0,0,4,0,0,0,0,0,0,0,0,1,1,1,1},
	{1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1},
	{1,1,0,0,0,0,0,0,0,2,1,1,1,1,1,0,3,1,1,1},
	{1,3,0,0,0,0,0,0,0,2,0,1,1,1,2,0,0,1,1,1},
	{1,2,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,1,1,1},
	{1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,1,1},
	{1,1,1,1,1,1,1,1,1,0,0,4,0,3,0,0,0,1,1,1},
	{1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1},
	{1,1,1,3,2,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1},
	{1,1,1,2,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1},
	{1,1,1,0,2,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1},
	{1,1,2,0,2,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1},
	{1,0,2,3,0,2,2,0,0,0,0,0,0,0,0,0,1,1,1,1},
	{1,0,2,0,0,0,2,0,0,0,0,0,3,0,0,0,1,1,1,1},
	{1,0,3,0,4,0,3,3,1,1,1,1,1,0,0,0,1,1,1,1},
	{1,0,2,0,0,0,3,0,0,1,1,1,0,0,0,0,1,1,1,1},
	{1,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,3,1,1,1},
	{1,0,0,0,0,0,0,0,0,4,0,0,0,0,0,2,2,1,1,1},
	{1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1},
	{1,2,2,2,2,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1},
	{1,3,0,0,2,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1},
	{1,3,0,0,2,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1},
	{1,3,0,0,2,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,2,1,1,1},
	{1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,2,0,1,1,1},
	{1,1,1,1,1,0,0,0,0,0,0,0,0,0,2,0,0,1,1,1},
	{1,1,1,1,0,0,0,4,0,0,1,1,1,1,1,0,0,1,1,1},
	{1,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1},
	{1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1},
	{1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1},
	{1,1,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1},
	{1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1},
	{1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,0,3,1,1,1},
	{1,1,0,0,0,0,1,1,1,1,1,1,1,1,0,0,3,1,1,1},
	{1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1},
	{1,1,2,2,3,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1},
	{1,1,0,0,0,2,0,0,0,0,0,0,1,1,1,1,1,1,1,1},
	{1,1,0,0,0,2,0,0,0,0,0,0,0,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1},
	{1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1},
	{1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1},
	{1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1},
	{1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,1},
	{1,1,3,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,1,1},
	{1,1,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1},
	{1,1,1,1,0,0,0,0,0,0,4,0,0,0,0,3,3,3,1,1},
	{1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,1},
	{1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,1,1},
	{1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,0,0,0,0,0,3,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1},
	{1,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1},
	{1,1,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1},
	{1,1,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,1,1},
	{1,1,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1},
	{1,1,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,1,1},
	{1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1},
	
}

STAGES = {
	--MAP_test,
	MAP_plain,
}
